<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Grego Koiné – Cartas (Deck Fixo)</title>
  <style>
    :root {
      --bg:#f8fafc;
      --card:#ffffff;
      --ink:#0f172a;
      --muted:#475569;
      --border:#e2e8f0;
      --accent:#0ea5e9;
      --danger:#ef4444;
      --ok:#16a34a;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:var(--bg);
      color:var(--ink);
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .app{
      width:100%;
      max-width:760px;
      background:var(--card);
      border-radius:16px;
      box-shadow:0 10px 30px rgba(2,6,23,.08);
      border:1px solid var(--border);
      padding:20px;
    }
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px}
    header h1{font-size:18px; margin:0}
    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin:10px 0 16px}
    .stat{border:1px solid var(--border); border-radius:12px; padding:10px; text-align:center}
    .stat .k{font-size:11px; color:var(--muted);}
    .stat .v{font-size:22px; font-weight:700}
    .card{border:1px solid var(--border); border-radius:16px; padding:28px; text-align:center; margin-bottom:14px}
    .greek-label{font-size:13px; color:var(--muted); margin-bottom:6px}
    .greek{font-size:36px; font-weight:800; letter-spacing:.5px}
    .row{display:flex; gap:8px}
    input[type=text]{
      flex:1; padding:12px 14px; border-radius:12px; border:1px solid var(--border);
      font-size:16px;
    }
    button{
      padding:12px 14px; border-radius:12px; border:1px solid var(--border); background:#fff; font-weight:700; cursor:pointer;
    }
    button:hover{box-shadow:0 4px 14px rgba(2,6,23,.06)}
    button[disabled]{opacity:.6; cursor:not-allowed}
    .feedback{min-height:24px; font-size:14px; margin-top:4px}
    .answer{display:flex; align-items:center; justify-content:space-between; margin-top:10px; gap:8px}
    .muted{color:var(--muted)}
    .toolbar{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; margin-top:8px}
    .pill{font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:#fff}
    .foot{display:flex; justify-content:space-between; align-items:center; margin-top:12px}
    .foot small{color:var(--muted)}
    .right{display:flex; gap:8px; align-items:center}
    .ok{color:var(--ok)} .danger{color:var(--danger)}
    .link{color:var(--accent); text-decoration:none}
    .link:hover{text-decoration:underline}
    .wrap{word-break:break-word}
  </style>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0ea5e9"/>
  <link rel="apple-touch-icon" href="icons/icon-192.png">

</head>
<body>
  <div class="app" id="app">
    <header>
      <h1>Grego Koiné – Cartas (Deck Fixo)</h1>
      <div class="muted" id="progress">–/–</div>
    </header>

    <div class="grid">
      <div class="stat">
        <div class="k">Tentativas</div>
        <div class="v" id="tries">3</div>
      </div>
      <div class="stat">
        <div class="k">Tempo</div>
        <div class="v" id="time">30s</div>
      </div>
      <div class="stat">
        <div class="k">Acertos / Erros / Pulou</div>
        <div class="v" id="stats">0 / 0 / 0</div>
      </div>
    </div>

    <div class="card">
      <div class="greek-label">Termo em grego</div>
      <div class="greek wrap" id="greek">–</div>
    </div>

    <div class="row">
      <input id="answer" type="text" placeholder="Digite a tradução em PT-BR"/>
      <button id="submit">Enviar</button>
      <button id="skip">Pular</button>
    </div>

    <div class="feedback" id="feedback"></div>

    <div class="answer" id="reveal" style="display:none">
      <div class="muted">Resposta: <span id="correct"></span></div>
      <button id="next">Próxima carta</button>
    </div>

    <div class="foot">
      <small class="muted">Deck único e bloqueado • 10 cartas aleatórias por rodada</small>
      <div class="right">
        <button class="pill" id="restart">Nova rodada</button>
      </div>
    </div>
  </div>

<script>
  // ==== UTIL =====
  function normalize(s){return (s||'').toString().trim().toLowerCase()
    .normalize('NFD').replace(/[\\u0300-\\u036f]/g,'');}

  function sampleN(arr, n){
    const idxs = new Set();
    const max = Math.min(n, arr.length);
    while (idxs.size < max) idxs.add(Math.floor(Math.random()*arr.length));
    return Array.from(idxs).map(i => arr[i]);
  }

  // ==== DECK FIXO ====
  // **Atenção**: traduções fiéis ao PDF anexado. Não há sinônimos externos.
  const DECK_BASE = [
    // Página 1 (coluna esquerda)
    {greek:"ἀγαθός, -ή, -όν", ans:["bom"]},
    {greek:"ἀγαπάω", ans:["amar"]},
    {greek:"ἀγάπη", ans:["amor"]},
    {greek:"ἄγγελος", ans:["mensageiro","anjo"]},
    {greek:"ἅγιος, -α, -ον", ans:["santo"]},
    {greek:"ἀδελφός, -ή, -όν", ans:["irmão"]},
    {greek:"αἴρω", ans:["levantar","erguer"]},
    {greek:"αἰών, -ῶνος", ans:["tempo","era","século"]},
    {greek:"ἀκούω", ans:["ouvir"]},
    {greek:"ἀλήθεια", ans:["verdade"]},
    {greek:"ἀλλά", ans:["mas","contudo","entretanto"]},
    {greek:"ἀλλήλους", ans:["uns aos outros"]},
    {greek:"ἄλλος, -η, -ο", ans:["outro"]},
    {greek:"ἁμαρτία", ans:["pecado"]},
    {greek:"ἀμήν", ans:["amém","em verdade"]},
    {greek:"ἄν", ans:["mod. do futuro do pretérito"]},
    {greek:"ἀνήρ, ἀνδρός", ans:["homem","marido"]},
    {greek:"ἄνθρωπος", ans:["homem","ser humano"]},
    {greek:"ἀνίστημι", ans:["levantar","ficar de pé"]},
    {greek:"ἀπέρχομαι", ans:["partir"]},
    {greek:"ἀπό", ans:["de","para longe de","desde"]},
    {greek:"ἀποθνῄσκω", ans:["morrer"]},
    {greek:"ἀποκρίνομαι", ans:["responder"]},
    {greek:"ἀποστέλλω", ans:["enviar"]},
    {greek:"ἀρχιερεύς", ans:["sumo sacerdote"]},
    {greek:"αὐτός, -ή, -ό", ans:["ele","mesmo","próprio"]},
    {greek:"ἀφίημι", ans:["soltar"]},
    {greek:"βάλλω", ans:["lançar"]},
    {greek:"βασιλεία", ans:["reino"]},
    {greek:"βασιλεύς", ans:["rei"]},
    {greek:"βλέπω", ans:["olhar"]},
    {greek:"γάρ", ans:["pois"]},
    {greek:"γῆ", ans:["terra"]},
    {greek:"γίνομαι", ans:["tornar-se","acontecer","surgir"]},
    {greek:"γινώσκω", ans:["conhecer"]},
    {greek:"γράφω", ans:["escrever"]},
    {greek:"γυνή, -αικός", ans:["mulher","esposa"]},
    {greek:"δέ", ans:["mas","e"]},
    {greek:"δεῖ", ans:["é necessário"]},
    {greek:"διά", ans:["por meio de","por causa de"]},
    {greek:"διδάσκω", ans:["ensinar"]},
    {greek:"δίδωμι", ans:["dar","conceder"]},
    // Página 1 (coluna direita – continua)
    {greek:"δόξα", ans:["glória","fama"]},
    {greek:"δοῦλος, -η, -ον", ans:["escravo","servo"]},
    {greek:"δύναμαι", ans:["ser capaz de","poder"]},
    {greek:"δύναμις", ans:["poder","capacidade"]},
    {greek:"ἐάν", ans:["se"]},
    {greek:"ἑαυτόν, -ἠν, -ό", ans:["ele mesmo","ela mesmo"]},
    {greek:"ἐγείρω", ans:["despertar"]},
    {greek:"ἐγώ", ans:["eu"]},
    {greek:"ἔθνος", ans:["nação","gentio"]},
    {greek:"εἰ", ans:["se"]},
    {greek:"εἰμί", ans:["ser","estar"]},
    {greek:"εἰς", ans:["para","em direção a"]},
    {greek:"εἷς, μία, ἕν", ans:["um"]},
    {greek:"εἰσέρχομαι", ans:["entrar"]},
    {greek:"ἐκ", ans:["de","fora de"]},
    {greek:"ἐκεῖ", ans:["ali","lá"]},
    {greek:"ἐκεῖνος, -η, -ο", ans:["esse","aquele"]},
    {greek:"ἐκκλησία", ans:["igreja","assembleia"]},
    {greek:"ἐν", ans:["em","dentro de"]},
    {greek:"ἐξέρχομαι", ans:["sair"]},
    {greek:"ἐξουσία", ans:["autoridade"]},
    {greek:"ἐπί", ans:["sobre","em","em cima de","perto de"]},
    {greek:"ἔργον", ans:["obra","trabalho","tarefa"]},
    {greek:"ἔρχομαι", ans:["ir","vir"]},
    {greek:"ἐσθίω", ans:["comer"]},
    {greek:"ἕτερος, -α, -ον", ans:["outro"]},
    {greek:"εὑρίσκω", ans:["encontrar"]},
    {greek:"ἔχω", ans:["ter"]},
    {greek:"ἕως", ans:["até"]},
    {greek:"ζάω", ans:["viver"]},
    {greek:"ζητέω", ans:["procurar"]},
    {greek:"ζωή", ans:["vida"]},
    {greek:"ἤ", ans:["ou","do que"]},
    {greek:"ἡμεῖς", ans:["nós"]},
    {greek:"ἡμέρα", ans:["dia"]},
    {greek:"θάνατος", ans:["morte"]},
    {greek:"θέλω", ans:["querer"]},
    {greek:"θεός", ans:["Deus","deus"]},
    {greek:"ἴδιος, -ία, -ον", ans:["próprio"]},
    {greek:"ἵνα", ans:["para que","a fim de"]},
    {greek:"Ἰησοῦς", ans:["Jesus"]},
    {greek:"Ἰουδαῖος, -α, -ον", ans:["judeu"]},

    // Página 2 (coluna esquerda)
    {greek:"ἵστημι", ans:["levantar","colocar de pé"]},
    {greek:"Ἰωάννης", ans:["João"]},
    {greek:"καθώς", ans:["como","assim como"]},
    {greek:"καί", ans:["e","também"]},
    {greek:"καλέω", ans:["chamar"]},
    {greek:"καλός, -ή, -όν", ans:["belo"]},
    {greek:"καρδία", ans:["coração"]},
    {greek:"κατά", ans:["abaixo","contra","de acordo com"]},
    {greek:"κόσμος", ans:["mundo"]},
    {greek:"κρίνω", ans:["julgar"]},
    {greek:"κύριος", ans:["senhor"]},
    {greek:"λαλέω", ans:["falar"]},
    {greek:"λαμβάνω", ans:["pegar","receber"]},
    {greek:"λαός", ans:["povo"]},
    {greek:"λέγω", ans:["dizer"]},
    {greek:"λόγος", ans:["palavra","razão"]},
    {greek:"μαθητής", ans:["discípulo"]},
    {greek:"μέγας, -η, -λη", ans:["grande"]},
    {greek:"μέλλω", ans:["estar prestes a"]},
    {greek:"μέν", ans:["por certo"]},
    {greek:"μένω", ans:["esperar","permanecer"]},
    {greek:"μετά", ans:["com","depois","entre"]},
    {greek:"μή", ans:["não"]},
    {greek:"μόνος, -ή, -όν", ans:["só","sozinho","apenas"]},
    {greek:"νεκρός", ans:["morto","cadáver"]},
    {greek:"νόμος", ans:["lei"]},
    {greek:"νῦν, νυνί", ans:["agora","então"]},
    {greek:"ὁδός", ans:["caminho","estrada"]},
    {greek:"οἶδα", ans:["saber"]},
    {greek:"οἶκος", ans:["casa"]},
    {greek:"ὅλος, -η, -ον", ans:["todo"]},
    {greek:"ὄνομα, -τος", ans:["nome"]},
    {greek:"ὁράω", ans:["ver"]},
    {greek:"ὅς, ἥ, ὅ", ans:["que","qual","quem"]},
    {greek:"ὅσος, -η, -ον", ans:["quanto","quão grande"]},
    {greek:"ὅστις, ἥτις, ὅ τι", ans:["o que quer que","quem quer que"]},
    {greek:"ὅταν", ans:["quando quer que"]},
    {greek:"ὅτε", ans:["quando"]},
    {greek:"ὅτι", ans:["que","porque"]},
    {greek:"οὐ, οὒ, οὐκ", ans:["não"]},
    {greek:"οὐδέ", ans:["nem"]},
    {greek:"οὐδείς, οὐδεμία, οὐδέν", ans:["nada","ninguém"]},
    {greek:"οὖν", ans:["portanto"]},
    {greek:"οὐρανός", ans:["céu"]},
    {greek:"οὗτος, αὕτη, τοῦτο", ans:["este","esta","isto"]},

    // Página 2 (coluna direita)
    {greek:"οὕτω, οὕτως", ans:["assim","desse modo"]},
    {greek:"ὀφθαλμός", ans:["olho"]},
    {greek:"ὄχλος", ans:["multidão"]},
    {greek:"πάλιν", ans:["de novo","outra vez"]},
    {greek:"παρά", ans:["de","ao lado","com"]},
    {greek:"παραδίδωμι", ans:["entregar","transmitir"]},
    {greek:"παρακαλέω", ans:["consolar","encorajar"]},
    {greek:"πᾶς, πᾶσα, πᾶν", ans:["todo","cada"]},
    {greek:"πατήρ, πατρός", ans:["pai"]},
    {greek:"Παῦλος", ans:["Paulo"]},
    {greek:"περί", ans:["ao redor de","com relação a","em"]},
    {greek:"περιπατέω", ans:["circular","ir e vir"]},
    {greek:"Πέτρος", ans:["Pedro"]},
    {greek:"πιστεύω", ans:["crer","confiar"]},
    {greek:"πίστις", ans:["fé","confiança"]},
    {greek:"πνεῦμα", ans:["sopro","vento","espírito"]},
    {greek:"ποιέω", ans:["fazer"]},
    {greek:"πόλις", ans:["cidade"]},
    {greek:"πολύς, πολλή, πολύ", ans:["muito"]},
    {greek:"πορεύομαι", ans:["viajar","caminhar"]},
    {greek:"πρός", ans:["de","para","perto de"]},
    {greek:"προφήτης", ans:["profeta"]},
    {greek:"πρῶτος, -η, -ον", ans:["primeiro"]},
    {greek:"πῶς", ans:["como"]},
    {greek:"ῥαββί", ans:["rabi","rabino"]},
    {greek:"σάρξ, σαρκὸς", ans:["carne"]},
    {greek:"σύ", ans:["tu"]},
    {greek:"σύν", ans:["com","junto com"]},
    {greek:"σῴζω", ans:["salvar"]},
    {greek:"σῶμα", ans:["corpo"]},
    {greek:"τέκνον", ans:["criança","filho"]},
    {greek:"τίθημι", ans:["colocar","pôr"]},
    {greek:"τις, τι", ans:["alguém","algo","um certo"]},
    {greek:"τίς, τί", ans:["quem (?)","o quê (?)","qual (?)"]},
    {greek:"τότε", ans:["então"]},
    {greek:"υἱός", ans:["filho"]},
    {greek:"ὑμεῖς", ans:["vós"]},
    {greek:"ὑπέρ", ans:["sobre","em favor de"]},
    {greek:"ὑπό", ans:["por","sob","abaixo"]},
    {greek:"Φαρισαῖος", ans:["fariseu"]},
    {greek:"φωνή", ans:["voz"]},
    {greek:"χάρις", ans:["graça"]},
    {greek:"χείρ, χειρός", ans:["mão"]},
    {greek:"Χριστός", ans:["ungido","Cristo"]},
    {greek:"ψυχή", ans:["alma"]},
    {greek:"ὡς", ans:["como"]},
  ];

  // ==== STATE ====
  let sessionDeck = [];
  let idx = 0;
  let tries = 3;
  let timer = 30;
  let interval = null;
  let stats = {ok:0, wrong:0, skipped:0};
  let showing = false;

  // ==== DOM ====
  const $greek = document.getElementById('greek');
  const $progress = document.getElementById('progress');
  const $tries = document.getElementById('tries');
  const $time = document.getElementById('time');
  const $stats = document.getElementById('stats');
  const $ans = document.getElementById('answer');
  const $submit = document.getElementById('submit');
  const $skip = document.getElementById('skip');
  const $feedback = document.getElementById('feedback');
  const $reveal = document.getElementById('reveal');
  const $correct = document.getElementById('correct');
  const $next = document.getElementById('next');
  const $restart = document.getElementById('restart');

  function startRound(){
    sessionDeck = sampleN(DECK_BASE,10);
    idx = 0;
    tries = 3;
    timer = 30;
    stats = {ok:0, wrong:0, skipped:0};
    showing = false;
    stopTimer();
    render();
    startTimer();
  }

  function startTimer(){
    stopTimer();
    timer = 30;
    interval = setInterval(()=>{
      timer--;
      if(timer<=0){
        stopTimer();
        reveal(false, "Tempo esgotado");
      }
      renderTime();
    },1000);
  }
  function stopTimer(){ if(interval){clearInterval(interval); interval=null;} }

  function current(){ return sessionDeck[idx]; }

  function render(){
    const c = current();
    $greek.textContent = c ? c.greek : "—";
    $progress.textContent = (c ? (idx+1) : 0) + "/" + sessionDeck.length;
    $tries.textContent = tries;
    $stats.textContent = stats.ok+" / "+stats.wrong+" / "+stats.skipped;
    $feedback.textContent = "";
    $reveal.style.display = "none";
    $ans.value = "";
    $ans.disabled = false;
    $submit.disabled = false;
    $skip.disabled = false;
    renderTime();
    $ans.focus();
  }
  function renderTime(){ $time.textContent = (timer<=0?0:timer)+"s"; if(timer<=5) $time.parentElement.querySelector('.v').style.color = "#ef4444"; else $time.parentElement.querySelector('.v').style.color = ""; }

  function goNext(){
    idx = (idx + 1) % sessionDeck.length;
    tries = 3;
    timer = 30;
    showing = false;
    stopTimer();
    render();
    startTimer();
  }

  function reveal(countWrong, reason){
    const c = current();
    showing = true;
    $correct.textContent = c.ans.join(", ");
    $feedback.innerHTML = (reason? reason+". " : "") + "Resposta: " + c.ans.join(", ");
    $reveal.style.display = "flex";
    $ans.disabled = true; $submit.disabled = true; $skip.disabled = true;
    if(countWrong) stats.wrong++;
    renderStats();
  }

  function renderStats(){ $stats.textContent = stats.ok+" / "+stats.wrong+" / "+stats.skipped; }

  $submit.addEventListener('click', (e)=>{
    e.preventDefault();
    if(showing) return;
    const c = current();
    const val = normalize($ans.value);
    const ok = c.ans.some(a => normalize(a) === val);
    if(ok){
      $feedback.textContent = "✅ Correto!";
      stats.ok++; renderStats();
      setTimeout(()=>{ goNext(); }, 550);
    }else{
      tries--;
      if(tries<=0){
        reveal(true, "❌ Errou 3 vezes");
      }else{
        $feedback.textContent = "❌ Tente novamente. Restam "+tries+" tentativa(s).";
        $tries.textContent = tries;
        $ans.focus();
      }
    }
  });

  $skip.addEventListener('click', ()=>{
    stats.skipped++; renderStats();
    // mover carta atual para o final da sessão
    const cur = sessionDeck.splice(idx,1)[0];
    sessionDeck.push(cur);
    if(idx >= sessionDeck.length) idx = 0;
    $feedback.textContent = "⏭️ Carta pulada. Voltará ao final da rodada.";
    setTimeout(()=>{ goNext(); }, 250);
  });

  $next.addEventListener('click', ()=>{
    goNext();
  });

  $restart.addEventListener('click', ()=> startRound());

  // Inicializar
  startRound();
</script>

<footer style="text-align:center; margin-top:20px; font-size:14px; color:#555;">
  © Greek game — Jeferson Unrein • Todos os direitos reservados
</footer>


<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js').catch(console.error);
    });
  }
</script>

</body>
</html>
